{
  "version": 3,
  "sources": ["../../node_modules/i18next-localstorage-backend/dist/esm/i18nextLocalStorageBackend.js"],
  "sourcesContent": ["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n/* eslint-disable max-classes-per-file */\nvar Storage = /*#__PURE__*/function () {\n  function Storage(options) {\n    _classCallCheck(this, Storage);\n    this.store = options.store;\n  }\n  _createClass(Storage, [{\n    key: \"setItem\",\n    value: function setItem(key, value) {\n      if (this.store) {\n        try {\n          this.store.setItem(key, value);\n        } catch (e) {\n          // f.log('failed to set value for key \"' + key + '\" to localStorage.');\n        }\n      }\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem(key, value) {\n      if (this.store) {\n        try {\n          return this.store.getItem(key, value);\n        } catch (e) {\n          // f.log('failed to get value for key \"' + key + '\" from localStorage.');\n        }\n      }\n      return undefined;\n    }\n  }]);\n  return Storage;\n}();\nfunction getDefaults() {\n  var store = null;\n  try {\n    store = window.localStorage;\n  } catch (e) {\n    if (typeof window !== 'undefined') {\n      console.log('Failed to load local storage.', e);\n    }\n  }\n  return {\n    prefix: 'i18next_res_',\n    expirationTime: 7 * 24 * 60 * 60 * 1000,\n    defaultVersion: undefined,\n    versions: {},\n    store: store\n  };\n}\nvar Cache = /*#__PURE__*/function () {\n  function Cache(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Cache);\n    this.init(services, options);\n    this.type = 'backend';\n  }\n  _createClass(Cache, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.services = services;\n      this.options = _objectSpread(_objectSpread(_objectSpread({}, getDefaults()), this.options), options);\n      this.storage = new Storage(this.options);\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      var nowMS = Date.now();\n      if (!this.storage.store) {\n        return callback(null, null);\n      }\n      var local = this.storage.getItem(\"\".concat(this.options.prefix).concat(language, \"-\").concat(namespace));\n      if (local) {\n        local = JSON.parse(local);\n        var version = this.getVersion(language);\n        if (\n        // expiration field is mandatory, and should not be expired\n        local.i18nStamp && local.i18nStamp + this.options.expirationTime > nowMS &&\n        // there should be no language version set, or if it is, it should match the one in translation\n        version === local.i18nVersion) {\n          var i18nStamp = local.i18nStamp;\n          delete local.i18nVersion;\n          delete local.i18nStamp;\n          return callback(null, local, i18nStamp);\n        }\n      }\n      return callback(null, null);\n    }\n  }, {\n    key: \"save\",\n    value: function save(language, namespace, data) {\n      if (this.storage.store) {\n        data.i18nStamp = Date.now();\n\n        // language version (if set)\n        var version = this.getVersion(language);\n        if (version) {\n          data.i18nVersion = version;\n        }\n\n        // save\n        this.storage.setItem(\"\".concat(this.options.prefix).concat(language, \"-\").concat(namespace), JSON.stringify(data));\n      }\n    }\n  }, {\n    key: \"getVersion\",\n    value: function getVersion(language) {\n      return this.options.versions[language] || this.options.defaultVersion;\n    }\n  }]);\n  return Cache;\n}();\nCache.type = 'backend';\n\nexport { Cache as default };\n"],
  "mappings": "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",
  "names": ["r", "Storage", "Cache"]
}
